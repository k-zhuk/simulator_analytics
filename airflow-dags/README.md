# Airflow
  Здесь собраны примеры скриптов для дагов

### 1. metrics_ETL.py
- данные собирались из двух таблиц через запросы
- просчитывались метрики кол-во лайков и просмотров из одной таблицы, а из другой для каждого пользователя считалось:
  - сколько он отсылает и получает сообщений
  - скольким людям он пишет
  - сколько людей пишут ему
  
- посчитанные метрики объединялись и сохранлись в новую таблицу
- каждый раз необходимо было добавлять данные в таблицу, т.е. предыдущие данные должны были сохраняться

### 2. metrics_telegram_ETL_feed.py
- данные собирались из одной таблицы
- необходимо было посчитать и отобразить следующие метрики:
  - DAU
  - Лайки
  - Просмотры
  - CTR
  
- посчитанные метрики и их динамику, представленную как изменение метрики за предыдущие 7 дней, необходимо было отправить сообщением в телеграм
- пример графического представления метрик ниже
<img src="https://github.com/k-zhuk/simulator_analytics/blob/main/seaborn/daily_report.png" width=40% height=40%>

### 3. metrics_telegram_ETL_app.py
- данные собирались с двух таблиц
- необходимо было посчитать и отобразить динамику метрик для всего приложения. Метрики (необходимо было самому придумать) были следующие:

  - кол-во сообщений на пользователя в разрезе пола
  - кол-во сообщений на пользователя в разрезе ОС
  - DAU для ленты новостей в разрезе гендера
  - CTR в разрезе источника трафика (рекламный или органический)
  - кол-во новых постов в день
  - кол-во лайков и просмотров
- пример графического отображения динамики метрик
<img src="https://github.com/k-zhuk/simulator_analytics/blob/main/seaborn/app_report.jpg" width=70% height=70%>

### 4. realtime_alerts.py
- необходимо было реализовать систему алертов для приложения
- в качестве системы были взяты два подходы:
  - с применением 3 сигм
  
    $(x_i < \mu_n - 3 \cdot \sigma_n)$ | $(x_i > \mu_n + 3 \cdot \sigma_n)$
  
  - с применением 25 и 75 квантилей
    
    $(x_i < q25_n - 1.5 \cdot IQR_n)$ | $(x_i > q75_n + 1.5 \cdot IQR_n)$
  
